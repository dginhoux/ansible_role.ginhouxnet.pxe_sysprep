---

pxe_sysprep_configure_action: generate
# pxe_sysprep_configure_action: cleanup

pxe_sysprep_root_folder: /srv/tftp



pxe_sysprep_generate_servers_list:
  - name: srv-swarm-manager1.infra.ginhoux.net
    # os: Fedora.37
    partitionning: nolvm-single
    filesystem: ext4
    filesystem_boot: ext2
    vgname: vg0
    disk: sda
    domain: infra.ginhoux.net
    rootpwd: root
    locale: en_US.UTF-8
    kblayout: fr
    timezone: Europe/Paris
    os_images_list:
      - Fedora.37
      - Fedora.38
      - Fedora.39
      - Debian.Buster
      - Debian.Bullseye
      - Debian.Bookworm
      - Gparted.Any
      - Clonezilla.Any



pxe_sysprep_specs_platforms:
  bios:
    pxe_tftp_addr: pxe.infra.ginhoux.net
    pxe_http_addr: pxe.infra.ginhoux.net
    sysprep_folder: "{{ pxe_sysprep_root_folder }}/sysprep/bios"
    menu_folder: "{{ pxe_sysprep_root_folder }}/menu/bios"
    menu_files:
      - default
      - default.entries
      - default.theme
      - splash.png
  efi64:
    pxe_tftp_addr: pxe.infra.ginhoux.net
    pxe_http_addr: pxe.infra.ginhoux.net
    sysprep_folder: "{{ pxe_sysprep_root_folder }}/sysprep/efi64"
    menu_folder: "{{ pxe_sysprep_root_folder }}/menu/efi64"
    menu_files:
      - default
      - default.entries
      - default.theme
      - splash.png


pxe_sysprep_specs_os_images:
  Clonezilla.Any:
    state: present
    label: Launch CloneZilla tools
    platforms:
      - name: bios
        state: present
        kernel_opts: os/clonezilla.any/vmlinuz
        append_opts: initrd=os/clonezilla.any/initrd.img boot=live username=user union=overlay config components quiet noswap edd=on nomodeset nodmraid locales= keyboard-layouts= ocs_live_run="ocs-live-general" ocs_live_extra_param="" ocs_live_batch=no net.ifnames=0 nosplash noprompt fetch=http://{{ pxe_sysprep_specs_platforms.bios.pxe_http_addr }}/os/clonezilla.any/filesystem.squashfs
      - name: efi64
        state: present
        kernel_opts: os/clonezilla.any/vmlinuz
        append_opts: initrd=os/clonezilla.any/initrd.img boot=live username=user union=overlay config components quiet noswap edd=on nomodeset nodmraid locales= keyboard-layouts= ocs_live_run="ocs-live-general" ocs_live_extra_param="" ocs_live_batch=no net.ifnames=0 nosplash noprompt fetch=http://{{ pxe_sysprep_specs_platforms.efi64.pxe_http_addr }}/os/clonezilla.any/filesystem.squashfs
  Gparted.Any:
    state: present
    label: Launch Gparted tools
    platforms:
      - name: bios
        state: present
        kernel_opts: os/gparted.any/vmlinuz
        append_opts: initrd=os/gparted.any/initrd.img boot=live config components union=overlay username=user noswap noeject vga=791 fetch=http://{{ pxe_sysprep_specs_platforms.efi64.pxe_http_addr }}/os/gparted.any/filesystem.squashfs
      - name: efi64
        state: present
        kernel_opts: os/gparted.any/vmlinuz
        append_opts: initrd=os/gparted.any/initrd.img boot=live config components union=overlay username=user noswap noeject vga=791 fetch=http://{{ pxe_sysprep_specs_platforms.efi64.pxe_http_addr }}/os/gparted.any/filesystem.squashfs
  Fedora.37:
    state: present
    label: Install Fedora 37
    mirror_url: https://ftp.lip6.fr/ftp/pub/linux/distributions/fedora/releases/37/Server/x86_64/os/
    mirror_proxy: ""
    platforms:
      - name: bios
        state: present
        kernel_opts: os/Fedora.37/vmlinuz
        append_opts: initrd=os/Fedora.37/initrd.img utf8 text 
      - name: efi64
        state: present
        kernel_opts: os/Fedora.37/vmlinuz
        append_opts: initrd=os/Fedora.37/initrd.img utf8 text 
  Fedora.38:
    state: present
    label: Install Fedora 38
    mirror_url: https://ftp.lip6.fr/ftp/pub/linux/distributions/fedora/releases/38/Server/x86_64/os/
    mirror_proxy: ""
    platforms:
      - name: bios
        state: present
        kernel_opts: os/Fedora.38/vmlinuz
        append_opts: initrd=os/Fedora.38/initrd.img utf8 text 
      - name: efi64
        state: present
        kernel_opts: os/Fedora.38/vmlinuz
        append_opts: initrd=os/Fedora.38/initrd.img utf8 text 
  Fedora.39:
    state: present
    label: Install Fedora 39
    mirror_url: https://ftp.lip6.fr/ftp/pub/linux/distributions/fedora/releases/39/Server/x86_64/os/
    mirror_proxy: ""
    platforms:
      - name: bios
        state: present
        kernel_opts: os/Fedora.39/vmlinuz
        append_opts: initrd=os/Fedora.39/initrd.img utf8 text 
      - name: efi64
        state: present
        kernel_opts: os/Fedora.39/vmlinuz
        append_opts: initrd=os/Fedora.39/initrd.img utf8 text 
  Debian.Buster:
    state: present
    label: Install Debian Buster
    mirror_url: ftp.fr.debian.org
    mirror_directory: /debian
    mirror_proxy: ""
    platforms:
      - name: bios
        state: present
        kernel_opts: os/Debian.Buster/linux
        append_opts: initrd=os/Debian.Buster/initrd.gz vga=788 auto=true
      - name: efi64
        state: present
        kernel_opts: os/Debian.Buster/linux
        append_opts: initrd=os/Debian.Buster/initrd.gz vga=788 auto=true
  Debian.Bullseye:
    state: present
    label: Install Debian Bullseye
    mirror_url: ftp.fr.debian.org
    mirror_directory: /debian
    mirror_proxy: ""
    platforms:
      - name: bios
        state: present
        kernel_opts: os/Debian.Bullseye/linux
        append_opts: initrd=os/Debian.Bullseye/initrd.gz vga=788 auto=true
      - name: efi64
        state: present
        kernel_opts: os/Debian.Bullseye/linux
        append_opts: initrd=os/Debian.Bullseye/initrd.gz vga=788 auto=true
  Debian.Bookworm:
    state: present
    label: Install Debian Bookworm
    mirror_url: ftp.fr.debian.org
    mirror_directory: /debian
    mirror_proxy: ""
    platforms:
      - name: bios
        state: present
        kernel_opts: os/Debian.Bookworm/linux
        append_opts: initrd=os/Debian.Bookworm/initrd.gz vga=788 auto=true
      - name: efi64
        state: present
        kernel_opts: os/Debian.Bookworm/linux
        append_opts: initrd=os/Debian.Bookworm/initrd.gz vga=788 auto=true









pxe_deploy_configure_action: generate
# pxe_deploy_configure_action: cleanup

pxe_deploy_menu_folder: /srv/tftp/menu
pxe_deploy_sysprep_folder: /srv/tftp/sysprep
pxe_deploy_tftp_address: pxe.infra.ginhoux.net

pxe_deploy_menu_default_files_bios:
  - default
  - default.entries
  - default.theme
  - splash.png
pxe_deploy_menu_default_files_efi64:
  - default
  - default.entries
  - default.theme
  - splash.png

# pxe_deploy_cleanup: false

pxe_deploy:
  - name: srv-swarm-manager1.infra.ginhoux.net
    os: Fedora.37
    partitionning: nolvm-single
    filesystem: ext4
    filesystem_boot: ext2
    vgname: vg0
    disk: sda
    domain: infra.ginhoux.net
    rootpwd: root
    locale: en_US.UTF-8
    kblayout: fr
    timezone: Europe/Paris


pxe_deploy_debian_stretch_mirror_hostname: ftp.fr.debian.org
pxe_deploy_debian_stretch_mirror_directory: /debian
pxe_deploy_debian_stretch_mirror_proxy: ""

pxe_deploy_debian_buster_mirror_hostname: ftp.fr.debian.org
pxe_deploy_debian_buster_mirror_directory: /debian
pxe_deploy_debian_buster_mirror_proxy: ""

pxe_deploy_debian_bullseye_mirror_hostname: ftp.fr.debian.org
pxe_deploy_debian_bullseye_mirror_directory: /debian
pxe_deploy_debian_bullseye_mirror_proxy: ""

pxe_deploy_debian_bookworm_mirror_hostname: ftp.fr.debian.org
pxe_deploy_debian_bookworm_mirror_directory: /debian
pxe_deploy_debian_bookworm_mirror_proxy: ""

pxe_deploy_centos_7_mirror_url: http://mirror.centos.org/centos-7/7/os/x86_64/
pxe_deploy_centos_8_mirror_url: http://mirror.centos.org/centos-8/8/BaseOS/x86_64/os/

pxe_deploy_fedora_32_mirror_url: https://ftp.lip6.fr/ftp/pub/linux/distributions/fedora/releases/32/Server/x86_64/os/
pxe_deploy_fedora_33_mirror_url: https://ftp.lip6.fr/ftp/pub/linux/distributions/fedora/releases/33/Server/x86_64/os/
pxe_deploy_fedora_34_mirror_url: https://ftp.lip6.fr/ftp/pub/linux/distributions/fedora/releases/34/Server/x86_64/os/
pxe_deploy_fedora_35_mirror_url: https://ftp.lip6.fr/ftp/pub/linux/distributions/fedora/releases/35/Server/x86_64/os/
pxe_deploy_fedora_36_mirror_url: https://ftp.lip6.fr/ftp/pub/linux/distributions/fedora/releases/36/Server/x86_64/os/
pxe_deploy_fedora_37_mirror_url: https://ftp.lip6.fr/ftp/pub/linux/distributions/fedora/releases/37/Server/x86_64/os/
pxe_deploy_fedora_38_mirror_url: https://ftp.lip6.fr/ftp/pub/linux/distributions/fedora/releases/38/Server/x86_64/os/
pxe_deploy_fedora_39_mirror_url: https://ftp.lip6.fr/ftp/pub/linux/distributions/fedora/releases/39/Server/x86_64/os/
